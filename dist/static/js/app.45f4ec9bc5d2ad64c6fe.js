webpackJsonp([1],{"0n5O":function(t,e){},Bs3P:function(t,e){},EEbw:function(t,e){t.exports={version:"0.20.5"}},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container",attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var o=n("VU/8")({name:"App"},s,!1,function(t){n("Bs3P")},null,null).exports,i=n("/ocq"),u=n("NYxO"),r={name:"userwallet",data:function(){return{amount:null,pending:!1,depositEvent:null}},computed:Object(u.b)({coinbase:function(t){return t.web3.coinbase},balance:function(t){if(null!==t.web3.web3Instance)return t.web3.web3Instance().fromWei(t.web3.balance,"ether")}}),methods:{clickDeposit:function(t){var e=this;console.log("Depositing:"+this.amount),this.depositEvent=null,this.pending=!0,this.$store.state.vaultContractInstance().deposit({gas:3e5,value:this.$store.state.web3.web3Instance().toWei(this.amount,"ether"),from:this.$store.state.web3.coinbase},function(t,n){t?(console.log(t),e.pending=!1):(console.log(n),e.pending=!1)})}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pure-u-1 userwallet"},[n("h1",[t._v("Your Wallet")]),t._v(" "),n("p",[t._v("Ethereum Address: "+t._s(t.coinbase)+" ")]),t._v(" "),n("h3",[t._v("Ethereum Balance: "+t._s(t.balance)+" Ether ")]),t._v(" "),n("p",[t._v("Would you like to deposit into your vault?")]),t._v(" "),t.depositEvent?n("div",{staticClass:"pure-u-1 event"},[n("p",[t._v("Thanks for the deposit of "+t._s(t.depositEvent._amount)+"!")])]):t._e(),t._v(" "),n("form",{staticClass:"pure-form"},[t.pending?n("img",{attrs:{id:"loader",height:"20",width:"20",src:"https://loading.io/spinners/double-ring/lg.double-ring-spinner.gif"}}):t._e(),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],staticClass:"pure-input",attrs:{type:"number",step:"0.01",min:"0.00",placeholder:"0 Ether"},domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}}),t._v(" "),n("button",{staticClass:"pure-button",attrs:{type:"submit"},on:{click:t.clickDeposit}},[t._v("Deposit")])])])},staticRenderFns:[]};var l=n("VU/8")(r,c,!1,function(t){n("mM3J")},"data-v-01b27632",null).exports,p="0x3430D3FC79e35f33bb69c4a0B4b89bC9Ee107897",d=[{constant:!1,inputs:[{name:"amount",type:"uint256"}],name:"withdraw",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"user",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"balance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"deposit",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"user",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"user",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Withdraw",type:"event"}],m={name:"vault",data:function(){return{amount:null,pending:!1,withdrawEvent:null,address:p}},computed:Object(u.b)({balance:function(t){if(null!==t.web3.web3Instance)return t.web3.web3Instance().fromWei(t.vaultContractBalance,"ether")},userBalance:function(t){if(null!==t.web3.web3Instance)return t.web3.web3Instance().fromWei(t.vaultUserBalance,"ether")}}),methods:{clickWithdraw:function(t){var e=this;console.log("Withdrawing:"+this.amount),this.withdrawEvent=null,this.pending=!0,this.$store.state.vaultContractInstance().withdraw(this.$store.state.web3.web3Instance().toWei(this.amount,"ether"),{gas:3e5,from:this.$store.state.web3.coinbase},function(t,n){t?(console.log(t),e.pending=!1):(console.log(n),e.pending=!1)})}},mounted:function(){console.log("dispatching getVaultContractInstance"),this.$store.dispatch("getVaultContractInstance")}},b={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pure-u-1 vault"},[n("h1",[t._v("The Vault")]),t._v(" "),n("p",[t._v("Vault Contract Address: "+t._s(t.address)+" ")]),t._v(" "),n("p",[t._v("Vault Contract Balance: "+t._s(t.balance)+" Ether ")]),t._v(" "),n("h3",[t._v("User's Vault Balance: "+t._s(t.userBalance)+" Ether ")]),t._v(" "),n("p",[t._v("Would you like to withdraw from your vault?")]),t._v(" "),t.withdrawEvent?n("div",{staticClass:"pure-u-1 event"},[n("p",[t._v("Here's your withdrawal of "+t._s(t.withdrawEvent._amount)+"!")])]):t._e(),t._v(" "),n("form",{staticClass:"pure-form"},[t.pending?n("img",{attrs:{id:"loader",height:"20",width:"20",src:"https://loading.io/spinners/double-ring/lg.double-ring-spinner.gif"}}):t._e(),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],staticClass:"pure-input",attrs:{type:"number",step:"0.01",min:"0.00",placeholder:"0 Ether"},domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}}),t._v(" "),n("button",{staticClass:"pure-button",attrs:{type:"submit"},on:{click:t.clickWithdraw}},[t._v("Withdraw")])])])},staticRenderFns:[]};var v=n("VU/8")(m,b,!1,function(t){n("0n5O")},"data-v-16c47bf1",null).exports,y={name:"eventmonitor",computed:Object(u.b)({lastEventBlock:function(t){return t.vaultLastEventBlock},eventList:function(t){return t.vaultEvents}})},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"eventmonitor"},[n("table",{staticClass:"pure-table pure-table-horizontal"},[t._m(0),t._v(" "),n("tbody",{attrs:{id:"list"}},t._l(t.eventList,function(e){return n("tr",{key:e.blockNumber},[n("td",[t._v(t._s(e.event))]),t._v(" "),n("td",[t._v(t._s(e.address))]),t._v(" "),n("td",[t._v(t._s(e.blockNumber))]),t._v(" "),n("td",[t._v(t._s(e.transactionHash))])])}))])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Event")]),this._v(" "),e("th",[this._v("Sent From")]),this._v(" "),e("th",[this._v("Block Number")]),this._v(" "),e("th",[this._v("tx Hash")])])])}]};var h={name:"vault-dapp",beforeCreate:function(){console.log("registerWeb3 Action dispatched from vault-dapp.vue"),this.$store.dispatch("registerWeb3")},components:{"user-wallet":l,vault:v,"event-monitor":n("VU/8")(y,f,!1,function(t){n("cf2u")},null,null).exports}},w={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this._m(0),this._v(" "),e("div",{staticClass:"deposit-withraw pure-g"},[e("div",{staticClass:"pure-u-1 pure-u-md-1-2"},[e("user-wallet")],1),this._v(" "),e("div",{staticClass:"pure-u-2 pure-u-md-1-2"},[e("vault")],1)]),this._v(" "),e("div",{staticClass:"event-monitor pure-g"},[e("div",{staticClass:"pure-u-1"},[e("h3",{staticClass:"event-monitor-head"},[this._v("Contract Event Monitor")]),this._v(" "),e("event-monitor")],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pure-menu pure-menu-horizontal"},[e("img",{staticClass:"pure-menu-heading",attrs:{width:"40",height:"40",src:"https://yt3.ggpht.com/a-/ACSszfELzBid-5zBt48A69RK3qkXP7dYj03f_jTHBw=s900-mo-c-c0xffffffff-rj-k-no"}}),this._v(" "),e("a",{staticClass:"pure-menu-heading",attrs:{href:"#"}},[this._v("Vault Access Terminal")]),this._v(" "),e("ul",{staticClass:"pure-menu-list"},[e("li",{staticClass:"pure-menu-item"},[e("a",{staticClass:"pure-menu-link",attrs:{href:"#"}})]),this._v(" "),e("li",{staticClass:"pure-menu-item"})])])}]};var _=n("VU/8")(h,w,!1,function(t){n("u3H7")},"data-v-67d7d31c",null).exports;a.a.use(i.a);var g=new i.a({routes:[{path:"/",name:"vault-dapp",component:_}]}),C={web3:{isInjected:!1,web3Instance:null,networkId:null,coinbase:null,balance:null,error:null},contractInstance:null,vaultContractInstance:null,vaultContractBalance:null,vaultUserBalance:null,vaultEvents:[]},I=n("woOf"),x=n.n(I),E=n("//Fk"),B=n.n(E),W=n("8k0n"),k=n.n(W),V=new B.a(function(t,e){var n=window.web3;if(void 0!==n){var a=new k.a(n.currentProvider);t({injectedWeb3:a.isConnected(),web3:function(){return a}})}else e(new Error("Unable to connect to Metamask"))}).then(function(t){return new B.a(function(e,n){t.web3().version.getNetwork(function(a,s){a?n(new Error("Unable to retrieve network ID")):(t=x()({},t,{networkId:s}),e(t))})})}).then(function(t){return new B.a(function(e,n){t.web3().eth.getCoinbase(function(a,s){a?n(new Error("Unable to retrieve coinbase")):(t=x()({},t,{coinbase:s}),e(t))})})}).then(function(t){return new B.a(function(e,n){t.web3().eth.getBalance(t.coinbase,function(a,s){a?n(new Error("Unable to retrieve balance for address: "+t.coinbase)):(t=x()({},t,{balance:s}),e(t))})})}),U=function(t){var e=window.web3;e=new k.a(e.currentProvider),setInterval(function(){if(e&&N.state.web3.web3Instance)if(e.eth.coinbase!==N.state.web3.coinbase){var t=e.eth.coinbase;e.eth.getBalance(e.eth.coinbase,function(e,n){e?console.log(e):N.dispatch("pollWeb3",{coinbase:t,balance:parseInt(n,10)})})}else e.eth.getBalance(N.state.web3.coinbase,function(t,e){t?console.log(t):parseInt(e,10)!==N.state.web3.balance&&N.dispatch("pollWeb3",{coinbase:N.state.web3.coinbase,balance:e})})},500)},M=[{constant:!1,inputs:[{name:"_number",type:"uint256"}],name:"bet",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[],name:"houseEdge",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"_houseEdge",type:"uint256"}],payable:!0,stateMutability:"payable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"_status",type:"bool"},{indexed:!1,name:"_amount",type:"uint256"}],name:"Won",type:"event"}],$=new B.a(function(t,e){var n=new k.a(window.web3.currentProvider).eth.contract(M),a=n.at("0x8cdaf0cd259887258bc13a92c0a6da92698644c0");console.log(n),console.log(a),t(a)}),A=new B.a(function(t,e){var n=new k.a(window.web3.currentProvider).eth.contract(d),a=n.at(p);console.log(n),console.log(a),t(a)}),P=function(t){var e=window.web3;e=new k.a(e.currentProvider),setInterval(function(){e&&N.state.web3.web3Instance&&e.eth.getBalance(p,function(t,e){t?console.log(t):parseInt(e,10)!==N.state.vaultContractBalance&&N.dispatch("pollVaultContract",{balance:e})})},500)},O=function(t){N.state.vaultContractInstance().balanceOf(N.state.web3.coinbase,function(t,e){t||N.dispatch("getVaultUserBalance",{balance:e})})},D=function(t){N.state.vaultContractInstance().allEvents({event:["Withdraw","Deposit"],fromBlock:0,toBlock:"latest"},function(t,e){t||N.dispatch("addContractEvent",{vaultEvent:e})})};a.a.use(u.a);var N=new u.a.Store({strict:!0,state:C,mutations:{registerWeb3Instance:function(t,e){console.log("registerWeb3instance Mutation being executed",e);var n=e,a=t.web3;a.coinbase=n.coinbase,a.networkId=n.networkId,a.balance=parseInt(n.balance,10),a.web3Instance=n.web3,t.web3=a,U(),P(),D()},pollWeb3Instance:function(t,e){console.log("pollWeb3Instance mutation being executed",e),t.web3.coinbase=e.coinbase,t.web3.balance=parseInt(e.balance,10)},registerContractInstance:function(t,e){console.log("Casino contract instance: ",e),t.contractInstance=function(){return e}},registerVaultContractInstance:function(t,e){console.log("Vault contract instance: ",e),t.vaultContractInstance=function(){return e}},pollVaultContractInstance:function(t,e){console.log("pollVaultContractInstance executing",e),t.vaultContractBalance=parseInt(e.balance,10),O()},getVaultUserBalanceInstance:function(t,e){console.log("pollVaultContractInstance executing",e),t.vaultUserBalance=parseInt(e.balance,10)},addContractEventInstance:function(t,e){console.log("addContractEvent executing"),t.vaultEvents.unshift(e.vaultEvent)}},actions:{registerWeb3:function(t){var e=t.commit;console.log("registerWeb3 Action being executed"),V.then(function(t){console.log("committing result to registerWeb3Instance mutation"),e("registerWeb3Instance",t)}).catch(function(t){console.log("error in action registerWeb3",t)})},pollWeb3:function(t,e){var n=t.commit;console.log("pollWeb3 action being executed"),n("pollWeb3Instance",e)},getContractInstance:function(t){var e=t.commit;$.then(function(t){e("registerContractInstance",t)}).catch(function(t){return console.log(t)})},getVaultContractInstance:function(t){var e=t.commit;A.then(function(t){e("registerVaultContractInstance",t)}).catch(function(t){return console.log(t)})},pollVaultContract:function(t,e){var n=t.commit;console.log("pollVaultContract action being executed"),n("pollVaultContractInstance",e)},getVaultUserBalance:function(t,e){var n=t.commit;console.log("getVaultUserBalance action being executed"),n("getVaultUserBalanceInstance",e)},addContractEvent:function(t,e){var n=t.commit;console.log("addContractEventInstance action being executed"),n("addContractEventInstance",e)}}});a.a.config.productionTip=!1,new a.a({el:"#app",router:g,store:N,components:{App:o},template:"<App/>"})},"R/pS":function(t,e){t.exports=[{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"name",outputs:[{name:"o_name",type:"bytes32"}],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"owner",outputs:[{name:"",type:"address"}],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"content",outputs:[{name:"",type:"bytes32"}],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"addr",outputs:[{name:"",type:"address"}],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"}],name:"reserve",outputs:[],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"subRegistrar",outputs:[{name:"",type:"address"}],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_newOwner",type:"address"}],name:"transfer",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_registrar",type:"address"}],name:"setSubRegistrar",outputs:[],type:"function"},{constant:!1,inputs:[],name:"Registrar",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_a",type:"address"},{name:"_primary",type:"bool"}],name:"setAddress",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_content",type:"bytes32"}],name:"setContent",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"}],name:"disown",outputs:[],type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"_name",type:"bytes32"},{indexed:!1,name:"_winner",type:"address"}],name:"AuctionEnded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_name",type:"bytes32"},{indexed:!1,name:"_bidder",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"NewBid",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"name",type:"bytes32"}],name:"Changed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"name",type:"bytes32"},{indexed:!0,name:"addr",type:"address"}],name:"PrimaryChanged",type:"event"}]},UIsv:function(t,e){t.exports=[{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"owner",outputs:[{name:"",type:"address"}],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_refund",type:"address"}],name:"disown",outputs:[],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"addr",outputs:[{name:"",type:"address"}],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"}],name:"reserve",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_newOwner",type:"address"}],name:"transfer",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_a",type:"address"}],name:"setAddr",outputs:[],type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"name",type:"bytes32"}],name:"Changed",type:"event"}]},cf2u:function(t,e){},mM3J:function(t,e){},oPsS:function(t,e){t.exports=[{constant:!1,inputs:[{name:"from",type:"bytes32"},{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"transfer",outputs:[],type:"function"},{constant:!1,inputs:[{name:"from",type:"bytes32"},{name:"to",type:"address"},{name:"indirectId",type:"bytes32"},{name:"value",type:"uint256"}],name:"icapTransfer",outputs:[],type:"function"},{constant:!1,inputs:[{name:"to",type:"bytes32"}],name:"deposit",outputs:[],payable:!0,type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"AnonymousDeposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"bytes32"},{indexed:!1,name:"value",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"bytes32"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"bytes32"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"indirectId",type:"bytes32"},{indexed:!1,name:"value",type:"uint256"}],name:"IcapTransfer",type:"event"}]},u3H7:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.45f4ec9bc5d2ad64c6fe.js.map